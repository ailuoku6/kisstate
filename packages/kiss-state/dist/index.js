import{jsx as t}from"react/jsx-runtime";import n,{forwardRef as r,useState as e,useEffect as o,useMemo as u,useCallback as c}from"react";var a=function(){return a=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},a.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var i=new WeakMap,f=new WeakMap,l={curCallBack:null},p=function(t){(f.get(t)||[]).forEach((function(t){return t()})),f.delete(t)},s=function(t,n){var r=l.curCallBack;l.curCallBack=n;var e=null,o=null;try{e=t()}catch(t){o=t,p(n)}finally{l.curCallBack=r}if(o)throw o;return e},v=function(t){(i.get(t)||[]).forEach((function(t){return t()}))},d=function(t,n){((null==t?void 0:t.keys())||[]).filter((function(r){var e;return null===(e=t.get(r))||void 0===e?void 0:e.has(n)})).forEach((function(t){return null==t?void 0:t()}))},h=function(t,n){var r=i.get(t)||[];r.push(n),i.set(t,r)};function y(t){var n=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=new(t.bind.apply(t,function(t,n,r){if(r||2===arguments.length)for(var e,o=0,u=n.length;o<u;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))}([void 0],n,!1))),o=new Map;e.__callbackMap__=o;var u=new Proxy(e,{set:function(t,n,r){var e=Reflect.get(t,n),c=Reflect.set(t,n,r);return e!==r&&(v(u),d(o,n)),c},get:function(t,n,r){var e,u,c,a=l.curCallBack;if(a){var i=o.get(a)||new Set;i.add(n),o.set(a,i),e=a,u=function(){o.delete(a)},(c=f.get(e)||[]).push(u),f.set(e,c)}return Reflect.get(t,n,r)}}),c=t.prototype.__watchFns__||[],a=u;return c.forEach((function(t){var n=[];h(u,(function(){setTimeout((function(){var r,e=t.deps.map((function(t){return a[t]})),o=e.some((function(t,r){return t!==n[r]}));n=e,o&&(null===(r=a[t.methodName])||void 0===r||r.call(a))}),0)}))})),v(u),u};return(n.prototype=Object.create(t.prototype)).constructor=n,Object.assign(n,t),n}function m(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,e){if("function"!=typeof e.value)throw new Error("@WatchProps can only decorate methods");var o=n.__watchFns__||[];o.push({methodName:r,deps:t}),n.__watchFns__=o}}function _(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,e){if("function"!=typeof e.get)throw new Error("@computed can only decorate methods");var o=e.get,u=!0,c=null,a=!0,i=[];e.get=function(){var n;return a&&(a=!1,h(n=this,(function(){var e=t.map((function(t){return n[t]})),a=e.some((function(t,n){return t!==i[n]}));i=e,a&&(u=!0,c=o.call(n),u=!1,v(n),d(n.__callbackMap__,r))}))),u?(c=o.call(this),u=!1,c):c}}}var g=function(){return null};function w(i){var f,l=function(t){return Object.prototype.isPrototypeOf.call(n.Component,t)||Object.prototype.isPrototypeOf.call(n.PureComponent,t)}(i),v=(f=i).$$typeof&&"Symbol(react.forward_ref)"===f.$$typeof.toString(),d=i.displayName||i.name,h=v?i.render:g,y=l?i.prototype.render:g,m="production"!==process.env.NODE_ENV,_=function(n,r){var f,d=(f=e(0)[1],c((function(){f((function(t){return t+1}))}),[])),_=e(!1);_[0];var g=_[1];o((function(){return m&&g(!0),function(){m&&g(!1),p(d)}}),[d]);var w=u((function(){if(!l)return v?function(n,r){var e=i;return e.render=function(t,n){return s((function(){return h(t,n)}),d)},t(e,a({},n,{ref:r}))}:function(t){return s((function(){return i(t)}),d)};var n=i,r=(n||{}).prototype;return(void 0===r?{}:r).render=function(){return s(y.bind(this),d)},function(r){return t(n,a({},r))}}),[i,l,v,d]);return w(n,r)},w=l||!v?_:r(_);return d&&(w.displayName=d),w}export{y as ObservableClass,_ as computed,w as observer,m as watchProps};
