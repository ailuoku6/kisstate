import{jsx as t}from"react/jsx-runtime";import n,{useMemo as r,useEffect as e,useState as o,useCallback as c}from"react";var u=function(){return u=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},u.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var a=new WeakMap,i=new WeakMap,f={curCallBack:null},l=function(t,n){var r=f.curCallBack;f.curCallBack=n;var e=t();return f.curCallBack=r,e},p=function(t){(a.get(t)||[]).forEach((function(t){return t()}))},s=function(t,n){((null==t?void 0:t.keys())||[]).filter((function(r){var e;return null===(e=t.get(r))||void 0===e?void 0:e.has(n)})).forEach((function(t){return null==t?void 0:t()}))},v=function(t,n){var r=a.get(t)||[];r.push(n),a.set(t,r)};function h(t){var n=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=new(t.bind.apply(t,function(t,n,r){if(r||2===arguments.length)for(var e,o=0,c=n.length;o<c;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return t.concat(e||Array.prototype.slice.call(n))}([void 0],n,!1))),o=new Map;e.__callbackMap__=o;var c=new Proxy(e,{set:function(t,n,r){var e=Reflect.get(t,n),u=Reflect.set(t,n,r);return e!==r&&(p(c),s(o,n)),u},get:function(t,n,r){var e,c,u,a=f.curCallBack;if(a){var l=o.get(a)||new Set;l.add(n),o.set(a,l),e=a,c=function(){o.delete(a)},(u=i.get(e)||[]).push(c),i.set(e,u)}return Reflect.get(t,n,r)}}),u=t.prototype.__watchFns__||[],a=c;return u.forEach((function(t){var n=[];v(c,(function(){setTimeout((function(){var r,e=t.deps.map((function(t){return a[t]})),o=e.some((function(t,r){return t!==n[r]}));n=e,o&&(null===(r=a[t.methodName])||void 0===r||r.call(a))}),0)}))})),p(c),c};return(n.prototype=Object.create(t.prototype)).constructor=n,Object.assign(n,t),n}function d(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,e){if("function"!=typeof e.value)throw new Error("@WatchProps can only decorate methods");var o=n.__watchFns__||[];o.push({methodName:r,deps:t}),n.__watchFns__=o}}function y(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,e){if("function"!=typeof e.get)throw new Error("@computed can only decorate methods");var o=e.get,c=!0,u=null,a=!0,i=[];e.get=function(){var n;return a&&(a=!1,v(n=this,(function(){var e=t.map((function(t){return n[t]})),a=e.some((function(t,n){return t!==i[n]}));i=e,a&&(c=!0,u=o.call(n),c=!1,p(n),s(n.__callbackMap__,r))}))),c?(u=o.call(this),c=!1,u):u}}}var g=function(a){return function(f){var p,s=(p=o(0)[1],c((function(){p((function(t){return t+1}))}),[])),v=Object.prototype.isPrototypeOf.call(n.Component,a)||Object.prototype.isPrototypeOf.call(n.PureComponent,a),h=r((function(){if(!v)return function(t){return l((function(){return a(t)}),s)};var n=a,r=n.prototype,e=r.render;return r.render=function(){return l(e.bind(this),s)},function(r){return t(n,u({},r))}}),[a,v,s]);e((function(){return function(){var t;t=s,(i.get(t)||[]).forEach((function(t){return t()})),i.delete(t)}}),[s]);var d=null,y=null;try{d=h(f)}catch(t){y=t}if(y)throw y;return d}};export{h as ObservableClass,y as computed,g as observer,d as watchProps};
